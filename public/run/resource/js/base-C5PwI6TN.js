var c=Object.defineProperty;var b=(a,t,e)=>t in a?c(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var i=(a,t,e)=>(b(a,typeof t!="symbol"?t+"":t,e),e);var d=(a,t,e)=>new Promise((s,r)=>{var l=o=>{try{p(e.next(o))}catch(u){r(u)}},n=o=>{try{p(e.throw(o))}catch(u){r(u)}},p=o=>o.done?s(o.value):Promise.resolve(o.value).then(l,n);p((e=e.apply(a,t)).next())});import{aM as h,aR as A}from"./index-BgaAjVjm.js";class ${constructor(t){i(this,"baseApi","");i(this,"formatParams",t=>{const e={};return Object.keys(t!=null?t:{}).forEach(s=>{t[s]!==""&&(e[s]=t[s])}),e});this.baseApi="/api/"+t}request(t,e=null,s,r){return h.request(t,e!=null?e:this.baseApi,{params:this.formatParams(s),data:r})}}class x extends ${constructor(){super(...arguments);i(this,"choices",()=>this.request("get",`${this.baseApi}/choices`));i(this,"fields",()=>this.request("get",`${this.baseApi}/search_fields`));i(this,"list",e=>this.request("get",`${this.baseApi}/list`,e));i(this,"save",e=>this.request("post",`${this.baseApi}/save`,{},e));i(this,"detail",e=>this.request("get",`${this.baseApi}/read`,e));i(this,"delete",e=>this.request("post",`${this.baseApi}/delete`,{},e));i(this,"upload",(e,s,r)=>h.upload(`${this.baseApi}/${e}/${r!=null?r:"upload"}`,{},s));i(this,"export",e=>d(this,null,function*(){return h.request("get",`${this.baseApi}/export-data`,{params:this.formatParams(e)},{responseType:"blob"}).then(({data:s,headers:r})=>{const n=/filename[^;=\n]*="((['"]).*?\2|[^;\n]*)"/.exec(r.get("content-disposition"));A(s,decodeURI(n[1]))})}));i(this,"import",(e,s)=>h.upload(`${this.baseApi}/import-data?action=${e}`,{},s,{headers:{"Content-Type":"text/xlsx"}}))}}export{x as B};
