var k=(U,r,t)=>new Promise((s,u)=>{var V=n=>{try{m(t.next(n))}catch(c){u(c)}},_=n=>{try{m(t.throw(n))}catch(c){u(c)}},m=n=>n.done?s(n.value):Promise.resolve(n.value).then(V,_);m((t=t.apply(U,r)).next())});import{M as f}from"./motion-S4vcz2cB.js";import{d as D,B as E,n as P,a2 as N,r as w,o as S,g as T,h as a,b as o,u as e,e as $,f as C,y as x,z as b,a3 as h,aD as F,aC as I}from"./index-BgaAjVjm.js";import{u as W}from"./rule-C1DTaG1O.js";import{d as M,u as R}from"./iphone-BaSFno6E.js";import{u as y}from"./hooks-KDYNtrFv.js";import{d as B}from"./lock-fill-BZPnsoM7.js";const j={class:"w-full flex justify-between"},O=D({__name:"LoginUpdate",setup(U){const{t:r}=E(),t=P(!1),s=N({phone:"",verifyCode:"",password:"",repeatPassword:""}),u=P(),{isDisabled:V,text:_}=R(),m=[{validator:(g,l,i)=>{l===""?i(new Error(b(h("login.passWordSureReg")))):s.password!==l?i(new Error(b(h("login.passWordDifferentReg")))):i()},trigger:"blur"}],n=g=>k(this,null,function*(){t.value=!0,g&&(yield g.validate(l=>{l?setTimeout(()=>{F(b(h("login.passWordUpdateReg")),{type:"success"}),t.value=!1},2e3):t.value=!1}))});function c(){R().end(),I().SET_CURRENTPAGE(0)}return(g,l)=>{const i=w("el-input"),p=w("el-form-item"),v=w("el-button"),z=w("el-form");return S(),T(z,{ref_key:"ruleFormRef",ref:u,model:s,rules:e(W),size:"large"},{default:a(()=>[o(e(f),null,{default:a(()=>[o(p,{prop:"phone"},{default:a(()=>[o(i,{modelValue:s.phone,"onUpdate:modelValue":l[0]||(l[0]=d=>s.phone=d),clearable:"",placeholder:e(r)("login.phone"),"prefix-icon":e(y)(e(M))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),o(e(f),{delay:100},{default:a(()=>[o(p,{prop:"verifyCode"},{default:a(()=>[$("div",j,[o(i,{modelValue:s.verifyCode,"onUpdate:modelValue":l[1]||(l[1]=d=>s.verifyCode=d),clearable:"",placeholder:e(r)("login.smsVerifyCode"),"prefix-icon":e(y)("ri:shield-keyhole-line")},null,8,["modelValue","placeholder","prefix-icon"]),o(v,{disabled:e(V),class:"ml-2",onClick:l[2]||(l[2]=d=>e(R)().start(u.value,"phone"))},{default:a(()=>[C(x(e(_).length>0?e(_)+e(r)("login.info"):e(r)("login.getVerifyCode")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),o(e(f),{delay:150},{default:a(()=>[o(p,{prop:"password"},{default:a(()=>[o(i,{modelValue:s.password,"onUpdate:modelValue":l[3]||(l[3]=d=>s.password=d),clearable:"","show-password":"",placeholder:e(r)("login.password"),"prefix-icon":e(y)(e(B))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),o(e(f),{delay:200},{default:a(()=>[o(p,{rules:m,prop:"repeatPassword"},{default:a(()=>[o(i,{modelValue:s.repeatPassword,"onUpdate:modelValue":l[4]||(l[4]=d=>s.repeatPassword=d),clearable:"","show-password":"",placeholder:e(r)("login.sure"),"prefix-icon":e(y)(e(B))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),o(e(f),{delay:250},{default:a(()=>[o(p,null,{default:a(()=>[o(v,{class:"w-full",size:"default",type:"primary",loading:t.value,onClick:l[5]||(l[5]=d=>n(u.value))},{default:a(()=>[C(x(e(r)("login.definite")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),o(e(f),{delay:300},{default:a(()=>[o(p,null,{default:a(()=>[o(v,{class:"w-full",size:"default",onClick:c},{default:a(()=>[C(x(e(r)("login.back")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{O as _};
