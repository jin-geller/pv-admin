var k=(h,s,n)=>new Promise((r,u)=>{var g=t=>{try{d(n.next(t))}catch(i){u(i)}},p=t=>{try{d(n.throw(t))}catch(i){u(i)}},d=t=>t.done?r(t.value):Promise.resolve(t.value).then(g,p);d((n=n.apply(h,s)).next())});import{M as c}from"./motion-S4vcz2cB.js";import{d as B,B as z,n as x,a2 as N,r as _,o as S,g as T,h as l,b as o,u as e,e as U,f as v,y as C,aD as D,z as F,a3 as I,aC as $}from"./index-BgaAjVjm.js";import{p as E}from"./rule-C1DTaG1O.js";import{d as L,u as V}from"./iphone-BaSFno6E.js";import{u as w}from"./hooks-KDYNtrFv.js";const M={class:"w-full flex justify-between"},J=B({__name:"LoginPhone",setup(h){const{t:s}=z(),n=x(!1),r=N({phone:"",verifyCode:""}),u=x(),{isDisabled:g,text:p}=V(),d=i=>k(this,null,function*(){n.value=!0,i&&(yield i.validate(a=>{a?setTimeout(()=>{D(F(I("login.loginSuccess")),{type:"success"}),n.value=!1},2e3):n.value=!1}))});function t(){V().end(),$().SET_CURRENTPAGE(0)}return(i,a)=>{const b=_("el-input"),m=_("el-form-item"),y=_("el-button"),R=_("el-form");return S(),T(R,{ref_key:"ruleFormRef",ref:u,model:r,rules:e(E),size:"large"},{default:l(()=>[o(e(c),null,{default:l(()=>[o(m,{prop:"phone"},{default:l(()=>[o(b,{modelValue:r.phone,"onUpdate:modelValue":a[0]||(a[0]=f=>r.phone=f),clearable:"",placeholder:e(s)("login.phone"),"prefix-icon":e(w)(e(L))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),o(e(c),{delay:100},{default:l(()=>[o(m,{prop:"verifyCode"},{default:l(()=>[U("div",M,[o(b,{modelValue:r.verifyCode,"onUpdate:modelValue":a[1]||(a[1]=f=>r.verifyCode=f),clearable:"",placeholder:e(s)("login.smsVerifyCode"),"prefix-icon":e(w)("ri:shield-keyhole-line")},null,8,["modelValue","placeholder","prefix-icon"]),o(y,{disabled:e(g),class:"ml-2",onClick:a[2]||(a[2]=f=>e(V)().start(u.value,"phone"))},{default:l(()=>[v(C(e(p).length>0?e(p)+e(s)("login.info"):e(s)("login.getVerifyCode")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),o(e(c),{delay:150},{default:l(()=>[o(m,null,{default:l(()=>[o(y,{class:"w-full",size:"default",type:"primary",loading:n.value,onClick:a[3]||(a[3]=f=>d(u.value))},{default:l(()=>[v(C(e(s)("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),o(e(c),{delay:200},{default:l(()=>[o(m,null,{default:l(()=>[o(y,{class:"w-full",size:"default",onClick:t},{default:l(()=>[v(C(e(s)("login.back")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{J as default};
