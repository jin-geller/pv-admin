import{useUser as X}from"./hook-BSeAVcZK.js";import{P as w}from"./index-BQG-VB-T.js";import{u as b}from"./hooks-KDYNtrFv.js";import{d as Y,n as z,a2 as ee,r as p,j as x,o as n,c as V,b as l,h as t,u as e,w as c,e as L,y as te,f as i,g as u,C as le,Q as oe,_ as ae}from"./index-BgaAjVjm.js";import"./sortable.esm-DUfXNDJ2.js";import"./epTheme-K8uHCORF.js";const ne={width:1024,height:1024,body:'<path fill="currentColor" d="M512 64h64v192h-64V64zm0 576h64v192h-64V640zM160 480v-64h192v64H160zm576 0v-64h192v64H736zM249.856 199.04l45.248-45.184L430.848 289.6L385.6 334.848L249.856 199.104zM657.152 606.4l45.248-45.248l135.744 135.744l-45.248 45.248L657.152 606.4zM114.048 923.2L68.8 877.952l316.8-316.8l45.248 45.248l-316.8 316.8zM702.4 334.848L657.152 289.6l135.744-135.744l45.248 45.248L702.4 334.848z"/>'},ie=ne,re={width:1024,height:1024,body:'<path fill="currentColor" d="M128 384v448h768V384H128zm-32-64h832a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32zm64-128h704v64H160zm96-128h512v64H256z"/>'},se=re,ce={width:24,height:24,body:'<path fill="currentColor" d="M16 1a1 1 0 0 1 1 1v3h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h4V2a1 1 0 0 1 1-1h8Zm-3 8h-2v3H8v2h2.999L11 17h2l-.001-3H16v-2h-3V9Zm2-6H9v2h6V3Z"/>'},de=ce,me={class:"main"},pe={key:0,class:"bg-[var(--el-fill-color-light)] w-full h-[46px] mb-2 pl-4 flex items-center"},ue={class:"flex-auto"},fe={style:{"font-size":"var(--el-font-size-base)"},class:"text-[rgba(42,46,54,0.5)] dark:text-[rgba(220,220,242,0.5)]"},he=Y({name:"Database",__name:"index",setup(_e){const y=z(),g=z("first"),D=ee({offsetBottom:45}),{loading:H,columns:$,dataList:M,operation:f,selectedNum:k,onSelectionCancel:R,handleSelectionChange:B,setDbBackup:T,setDbOptimize:F,setDbRepair:N,getTableInfo:S,tableInfo:I,infoColumns:O,infoDrawer:h,infoTitle:U,fileColumns:Z,fileList:P,handleFileDel:j,handleFileDownload:A,backupList:E,dbList:K,handleFileImport:Q}=X(y);return(ve,o)=>{const a=p("el-button"),_=p("pure-table"),q=p("el-drawer"),C=p("el-tab-pane"),G=p("el-popconfirm"),J=p("el-tabs"),d=x("auth"),W=x("motion-fade");return n(),V("div",me,[l(J,{modelValue:g.value,"onUpdate:modelValue":o[4]||(o[4]=r=>g.value=r),class:"demo-tabs",type:"border-card"},{default:t(()=>[l(C,{label:"数据表",name:"first"},{default:t(()=>[l(e(w),{title:"数据表列表",columns:e($),onRefresh:e(K)},{default:t(({size:r,dynamicColumns:v,height:m})=>[e(k)>0?c((n(),V("div",pe,[L("div",ue,[L("span",fe," 已选 "+te(e(k))+" 项 ",1),l(a,{type:"primary",text:"",onClick:e(R)},{default:t(()=>[i(" 取消选择 ")]),_:1},8,["onClick"]),c((n(),u(a,{type:"primary",icon:e(b)(e(se)),onClick:o[0]||(o[0]=s=>e(f)(e(T),"备份"))},{default:t(()=>[i("备份")]),_:1},8,["icon"])),[[d,"backup"]]),c((n(),u(a,{type:"primary",icon:e(b)(e(ie)),onClick:o[1]||(o[1]=s=>e(f)(e(F),"优化"))},{default:t(()=>[i("优化")]),_:1},8,["icon"])),[[d,"optimize"]]),c((n(),u(a,{type:"primary",icon:e(b)(e(de)),onClick:o[2]||(o[2]=s=>e(f)(e(N),"修复"))},{default:t(()=>[i("修复")]),_:1},8,["icon"])),[[d,"repair"]])])])),[[W]]):le("",!0),l(_,{ref_key:"tableRef",ref:y,"row-key":"id","align-whole":"center",adaptive:"",showOverflowTooltip:"",adaptiveConfig:D,"table-layout":"auto","default-expand-all":"",loading:e(H),size:r,height:m,data:e(M),columns:v,"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(B)},{operation:t(({row:s})=>[l(a,{link:"",type:"primary",onClick:be=>e(S)(s)},{default:t(()=>[i(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1032,["adaptiveConfig","loading","size","height","data","columns","header-cell-style","onSelectionChange"])]),_:1},8,["columns","onRefresh"]),l(q,{modelValue:e(h),"onUpdate:modelValue":o[3]||(o[3]=r=>oe(h)?h.value=r:null),direction:"rtl",title:e(U),size:"50%"},{default:t(()=>[l(_,{"align-whole":"center","table-layout":"auto","default-expand-all":"",showOverflowTooltip:"",data:e(I),columns:e(O),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},size:"small"},null,8,["data","columns","header-cell-style"])]),_:1},8,["modelValue","title"])]),_:1}),l(C,{label:"备份",name:"second"},{default:t(()=>[l(e(w),{title:"备份列表",columns:e(Z),onRefresh:e(E)},{default:t(({size:r,dynamicColumns:v})=>[l(_,{"align-whole":"center","table-layout":"auto","default-expand-all":"",showOverflowTooltip:"",data:e(P),columns:v,size:r,"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"}},{operation:t(({row:m})=>[c((n(),u(a,{link:"",type:"primary",onClick:s=>e(A)(m)},{default:t(()=>[i(" 下载 ")]),_:2},1032,["onClick"])),[[d,"download"]]),c((n(),u(a,{link:"",type:"primary",onClick:s=>e(Q)(m)},{default:t(()=>[i(" 导入 ")]),_:2},1032,["onClick"])),[[d,"import"]]),l(G,{width:"230",title:`是否确认删除名称为 ${m.name} 的备份文件？`,onConfirm:s=>e(j)(m)},{reference:t(()=>[c((n(),u(a,{link:"",type:"primary"},{default:t(()=>[i(" 删除 ")]),_:1})),[[d,"del"]])]),_:2},1032,["title","onConfirm"])]),_:2},1032,["data","columns","size","header-cell-style"])]),_:1},8,["columns","onRefresh"])]),_:1})]),_:1},8,["modelValue"])])}}}),xe=ae(he,[["__scopeId","data-v-1e175f36"]]);export{xe as default};
