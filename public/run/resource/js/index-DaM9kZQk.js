var ve=Object.defineProperty;var Z=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var J=(e,r,a)=>r in e?ve(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,P=(e,r)=>{for(var a in r||(r={}))ge.call(r,a)&&J(e,a,r[a]);if(Z)for(var a of Z(r))pe.call(r,a)&&J(e,a,r[a]);return e};var Q=(e,r,a)=>new Promise((T,s)=>{var y=u=>{try{f(a.next(u))}catch(d){s(d)}},p=u=>{try{f(a.throw(u))}catch(d){s(d)}},f=u=>u.done?T(u.value):Promise.resolve(u.value).then(y,p);f((a=a.apply(e,r)).next())});import{S as be}from"./sortable.esm-DUfXNDJ2.js";import{o as m,c as C,e as w,d as xe,n as c,K as g,a5 as _e,ba as me,aP as M,p as I,b as t,ax as Ce,F as K,w as B,j as E,r as i,f as R,u as X,z as _,be as we,W as ye,H as ke,A as $e,ay as Ae}from"./index-BA19eJmX.js";import{u as Be}from"./epTheme-DMNTQLh-.js";const Ee={width:"32",height:"32",fill:"currentColor","aria-hidden":"true","data-icon":"holder",viewBox:"64 64 896 896"},Se=w("path",{d:"M300 276.5a56 56 0 1 0 56-97 56 56 0 0 0-56 97m0 284a56 56 0 1 0 56-97 56 56 0 0 0-56 97M640 228a56 56 0 1 0 112 0 56 56 0 0 0-112 0m0 284a56 56 0 1 0 112 0 56 56 0 0 0-112 0M300 844.5a56 56 0 1 0 56-97 56 56 0 0 0-56 97M640 796a56 56 0 1 0 112 0 56 56 0 0 0-112 0"},null,-1),De=[Se];function Me(e,r){return m(),C("svg",Ee,[...De])}const Re={render:Me},Te={width:"32",height:"32",viewBox:"0 0 24 24"},He=w("path",{fill:"currentColor",d:"M22 4V2H2v2h9v14.17l-5.5-5.5-1.42 1.41L12 22l7.92-7.92-1.42-1.41-5.5 5.5V4z"},null,-1),Ve=[He];function je(e,r){return m(),C("svg",Te,[...Ve])}const Ne={render:je},Oe={width:"32",height:"32",viewBox:"0 0 24 24"},ze=w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4m-4 4a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"},null,-1),Fe=[ze];function Pe(e,r){return m(),C("svg",Oe,[...Fe])}const Ie={render:Pe},Ke={width:"32",height:"32",viewBox:"0 0 24 24"},qe=w("path",{fill:"currentColor",d:"M3.34 17a10 10 0 0 1-.978-2.326 3 3 0 0 0 .002-5.347A10 10 0 0 1 4.865 4.99a3 3 0 0 0 4.631-2.674 10 10 0 0 1 5.007.002 3 3 0 0 0 4.632 2.672A10 10 0 0 1 20.66 7c.433.749.757 1.53.978 2.326a3 3 0 0 0-.002 5.347 10 10 0 0 1-2.501 4.337 3 3 0 0 0-4.631 2.674 10 10 0 0 1-5.007-.002 3 3 0 0 0-4.632-2.672A10 10 0 0 1 3.34 17m5.66.196a5 5 0 0 1 2.25 2.77q.75.071 1.499.001A5 5 0 0 1 15 17.197a5 5 0 0 1 3.525-.565q.435-.614.748-1.298A5 5 0 0 1 18 12c0-1.26.47-2.437 1.273-3.334a8 8 0 0 0-.75-1.298A5 5 0 0 1 15 6.804a5 5 0 0 1-2.25-2.77q-.75-.071-1.499-.001A5 5 0 0 1 9 6.803a5 5 0 0 1-3.525.565 8 8 0 0 0-.748 1.298A5 5 0 0 1 6 12a5 5 0 0 1-1.273 3.334 8 8 0 0 0 .75 1.298A5 5 0 0 1 9 17.196M12 15a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2"},null,-1),Le=[qe];function Ge(e,r){return m(),C("svg",Ke,[...Le])}const Ue={render:Ge},We={width:"32",height:"32",viewBox:"0 0 24 24"},Ze=w("path",{fill:"currentColor",d:"M13.79 10.21a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42l-2.5-2.5a1 1 0 0 0-.33-.21 1 1 0 0 0-.76 0 1 1 0 0 0-.33.21l-2.5 2.5a1 1 0 0 0 1.42 1.42l.79-.8v5.18l-.79-.8a1 1 0 0 0-1.42 1.42l2.5 2.5a1 1 0 0 0 .33.21.94.94 0 0 0 .76 0 1 1 0 0 0 .33-.21l2.5-2.5a1 1 0 0 0-1.42-1.42l-.79.8V9.41ZM7 4h10a1 1 0 0 0 0-2H7a1 1 0 0 0 0 2m10 16H7a1 1 0 0 0 0 2h10a1 1 0 0 0 0-2"},null,-1),Je=[Ze];function Qe(e,r){return m(),C("svg",We,[...Je])}const Xe={render:Qe},Ye={width:"32",height:"32",viewBox:"0 0 24 24"},el=w("path",{fill:"currentColor",d:"m20.71 19.29-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42M5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6"},null,-1),ll=[el];function tl(e,r){return m(),C("svg",Ye,[...ll])}const al={render:tl};function nl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!we(e)}const rl={title:{type:String,default:"列表"},tableRef:{type:Object},columns:{type:Array,default:()=>[]},isExpandAll:{type:Boolean,default:!0},tableKey:{type:[String,Number],default:"0"},isCollapseSearch:{type:Boolean,default:!1}},ol=xe({name:"PureTableBar",props:rl,emits:["refresh"],setup(e,{emit:r,slots:a,attrs:T}){const s=c("default"),y=c(!1),p=c(!0),f=c(!1),u=$e(),d=c(e.isExpandAll),Y=c(e.isCollapseSearch),q=g(e==null?void 0:e.columns).filter(l=>_e(l==null?void 0:l.hide)?!l.hide:!(me(l==null?void 0:l.hide)&&(l!=null&&l.hide())));let b=M(g(e==null?void 0:e.columns),"label");const S=c(M(g(q),"label")),h=c(g(e==null?void 0:e.columns)),H=I(()=>l=>({background:l===s.value?Be().epThemeColor:"",color:l===s.value?"#fff":"var(--el-text-color-primary)"})),k=I(()=>["text-black","dark:text-white","duration-100","hover:!text-primary","cursor-pointer","outline-none"]),ee=I(()=>["flex","justify-between","pt-[3px]","px-[11px]","border-b-[1px]","border-solid","border-[#dcdfe6]","dark:border-[#303030]"]);function le(){y.value=!0,r("refresh"),ye(500).then(()=>y.value=!1)}function te(){d.value=!d.value,L(e.tableRef.data,d.value)}function L(l,o){l.forEach(n=>{e.tableRef.toggleRowExpansion(n,o),n.children!==void 0&&n.children!==null&&L(n.children,o)})}function ae(l){S.value=l?b:[],f.value=!1,h.value.map(o=>l?o.hide=!1:o.hide=!0)}function ne(l){S.value=l;const o=l.length;p.value=o===b.length,f.value=o>0&&o<b.length}function re(l,o){h.value.filter(n=>_(n.label)===_(o))[0].hide=!l}function oe(){return Q(this,null,function*(){p.value=!0,f.value=!1,h.value=g(e==null?void 0:e.columns),b=[],b=yield M(g(e==null?void 0:e.columns),"label"),S.value=M(g(q),"label")})}const ie={dropdown:()=>t(i("el-dropdown-menu"),{class:"translation"},{default:()=>[t(i("el-dropdown-item"),{style:H.value("large"),onClick:()=>s.value="large"},{default:()=>[R("宽松")]}),t(i("el-dropdown-item"),{style:H.value("default"),onClick:()=>s.value="default"},{default:()=>[R("默认")]}),t(i("el-dropdown-item"),{style:H.value("small"),onClick:()=>s.value="small"},{default:()=>[R("紧凑")]})]})},ce=l=>{l.preventDefault(),ke(()=>{var n;const o=((n=u==null?void 0:u.proxy)==null?void 0:n.$refs[`GroupRef${X(e.tableKey)}`]).$el.firstElementChild;be.create(o,{animation:300,handle:".drag-btn",onEnd:({newIndex:A,oldIndex:v,item:he})=>{const N=he,O=N.parentNode,z=h.value[v],F=h.value[A];if(z!=null&&z.fixed||F!=null&&F.fixed){const D=O.children[v];A>v?O.insertBefore(N,D):O.insertBefore(N,D&&D.nextElementSibling);return}const fe=h.value.splice(v,1)[0];h.value.splice(A,0,fe)}})})},ue=l=>!!h.value.filter(o=>_(o.label)===_(l))[0].fixed,$=l=>({content:l,offset:[0,18],duration:[300,0],followCursor:!0,hideOnClick:"toggle"}),se={reference:()=>B(t(Ue,{class:["w-[16px]",k.value]},null),[[E("tippy"),$("列设置")]])},x=c(!1),V=c(),G=c(),U=c(),W=c(),j=c();function de(){x.value=!x.value;const l=V.value.scrollHeight+1;V.value.style.height=(x.value?l:0)+"px",G.value=x.value?["border-b-[1px]","border-solid","border-[#dcdfe6]","dark:border-[#303030]"]:null;const o=U.value.scrollHeight,n=W.value.scrollHeight;j.value=x.value?o-l-n-70:j.value+l}return()=>{var o;let l;return t(K,null,[t("div",Ce(T,{class:"w-[99/100] px-2 pb-2 bg-bg_color",ref:U}),[a!=null&&a.collapseSearch?t("div",{style:"overflow:hidden",class:[G.value]},[t("div",{ref:V,style:"transition: height 0.3s;height:0px;"},[a.collapseSearch()])]):null,t("div",{class:"flex justify-between w-full h-[60px] p-4",ref:W},[a!=null&&a.title?a.title():t("p",{class:"font-bold text-2xl truncate",style:"line-height:40px"},[e.title]),t("div",{class:"flex items-center justify-around"},[a!=null&&a.buttons?t("div",{class:"flex mr-4"},[a.buttons()]):null,(o=e.tableRef)!=null&&o.size?t(K,null,[B(t(Ne,{class:["w-[16px]",k.value],style:{transform:d.value?"none":"rotate(-90deg)"},onClick:()=>te()},null),[[E("tippy"),$(d.value?"折叠":"展开")]]),t(i("el-divider"),{direction:"vertical"},null)]):null,Y.value?t(K,null,[B(t(al,{class:["w-[16px]",k.value],onClick:()=>de()},null),[[E("tippy"),$(x.value?"关闭搜索":"展开搜索")]]),t(i("el-divider"),{direction:"vertical"},null)]):null,B(t(Ie,{class:["w-[16px]",k.value,y.value?"animate-spin":""],onClick:()=>le()},null),[[E("tippy"),$("刷新")]]),t(i("el-divider"),{direction:"vertical"},null),B(t(i("el-dropdown"),{trigger:"click"},P({default:()=>[t(Xe,{class:["w-[16px]",k.value]},null)]},ie)),[[E("tippy"),$("密度")]]),t(i("el-divider"),{direction:"vertical"},null),t(i("el-popover"),{placement:"bottom-start","popper-style":{padding:0},width:"200",trigger:"click"},P({default:()=>[t("div",{class:[ee.value]},[t(i("el-checkbox"),{class:"!-mr-1",label:"列展示",modelValue:p.value,"onUpdate:modelValue":n=>p.value=n,indeterminate:f.value,onChange:n=>ae(n)},null),t(i("el-button"),{type:"primary",link:!0,onClick:()=>oe()},{default:()=>[R("重置")]})]),t("div",{class:"pt-[6px] pl-[11px]"},[t(i("el-scrollbar"),{"max-height":"36vh"},{default:()=>[t(i("el-checkbox-group"),{ref:`GroupRef${X(e.tableKey)}`,modelValue:S.value,onChange:n=>ne(n)},{default:()=>[t(i("el-space"),{direction:"vertical",alignment:"flex-start",size:0},nl(l=b.map((n,A)=>t("div",{class:"flex items-center"},[t(Re,{class:["drag-btn w-[16px] mr-2",ue(n)?"!cursor-no-drop":"!cursor-grab"],onMouseenter:v=>ce(v)},null),t(i("el-checkbox"),{key:A,label:n,value:n,onChange:v=>re(v,n)},{default:()=>[t("span",{title:_(n),class:"inline-block w-[120px] truncate hover:text-text_color_primary"},[_(n)])]})])))?l:{default:()=>[l]})]})]})])]},se))])]),a.default({size:s.value,dynamicColumns:h.value,height:j.value})])])}}}),dl=Ae(ol);export{dl as P};
