var W=(T,b,i)=>new Promise((x,_)=>{var y=n=>{try{h(i.next(n))}catch(c){_(c)}},C=n=>{try{h(i.throw(n))}catch(c){_(c)}},h=n=>n.done?x(n.value):Promise.resolve(n.value).then(y,C);h((i=i.apply(T,b)).next())});import{useRole as ve}from"./hook-D-mFEb-x.js";import{P as be}from"./index-DaM9kZQk.js";import{u as d}from"./hooks-Wm5s6Ksc.js";import{d as xe,p as ye,n as v,a2 as Ce,q as ke,X as we,H as Ve,W as Se,aY as Re,r as s,j as X,o as u,c as q,e as r,b as o,h as t,u as e,f as m,w as f,g as S,T as R,R as Y,y as G,Q as P,C as Pe,_ as $e}from"./index-BA19eJmX.js";import{A as De,E as Ie,D as ze}from"./add-circle-line-CoQjCwv9.js";import{R as Be}from"./refresh-zmagq4lj.js";import{d as Te,a as Ue}from"./close-CObHKOmY.js";import{d as Ae}from"./check-CIQVCvCT.js";import"./form.vue_vue_type_script_setup_true_lang-Bxk0xpjM.js";import"./publicStyle-21uR1UcM.js";import"./role-CicKRrAx.js";import"./menu-O0iCQE_R.js";import"./sortable.esm-DUfXNDJ2.js";import"./epTheme-DMNTQLh-.js";const Ee={class:"main"},Ne={key:0,class:"!min-w-[calc(100vw-60vw-236px)] px-2 pb-2 bg-bg_color ml-2 overflow-auto"},je={class:"flex justify-between w-full px-3 pt-5 pb-4"},Fe={class:"flex"},Me={class:"font-bold truncate"},Oe={class:"flex flex-wrap"},He=xe({name:"SystemRole",__name:"index",setup(T){const b=ye(()=>["w-[22px]","h-[22px]","flex","justify-center","items-center","outline-none","rounded-[4px]","cursor-pointer","transition-colors","hover:bg-[#0000000f]","dark:hover:bg-[#ffffff1f]","dark:hover:text-[#ffffffd9]"]),i=v(),x=v(),_=v(),y=v(),C=v(),h=Ce({offsetBottom:108}),{form:n,isShow:c,curRow:U,loading:A,columns:J,rowStyle:K,dataList:Z,treeData:ee,treeProps:le,pagination:g,isExpandAll:$,isSelectAll:D,isLinkage:k,treeSearchValue:I,onSearch:E,resetForm:oe,openDialog:N,handleMenu:j,handleSave:te,handleDelete:ae,filterMethod:ne,transformI18n:se,onQueryChanged:re,handleSizeChange:ie,handleCurrentChange:ce,handleSelectionChange:pe}=ve(i);return ke(()=>{we(y,()=>W(this,null,function*(){yield Ve(),Se(60).then(()=>{C.value=parseFloat(Re(_.value.getTableDoms().tableWrapper.style.height,"px"))})}))}),(Le,a)=>{var L;const F=s("el-input"),z=s("el-form-item"),M=s("el-option"),de=s("el-select"),p=s("el-button"),ue=s("el-form"),me=s("el-popconfirm"),fe=s("pure-table"),O=s("IconifyIconOffline"),B=s("el-checkbox"),_e=s("el-tree-v2"),w=X("auth"),H=X("tippy");return u(),q("div",Ee,[r("div",{ref_key:"contentRef",ref:y,class:R(["flex",e(Y)()?"flex-wrap":""])},[o(e(be),{class:R([e(c)&&!e(Y)()?"!w-[60vw]":"w-full"]),style:{transition:"width 220ms cubic-bezier(0.4, 0, 0.2, 1)"},title:"角色管理",columns:e(J),isCollapseSearch:!0,onRefresh:e(E)},{collapseSearch:t(()=>[o(ue,{ref_key:"formRef",ref:x,inline:!0,model:e(n),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:t(()=>[o(z,{label:"角色名称：",prop:"name"},{default:t(()=>[o(F,{modelValue:e(n).name,"onUpdate:modelValue":a[0]||(a[0]=l=>e(n).name=l),placeholder:"请输入角色名称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),o(z,{label:"状态：",prop:"status"},{default:t(()=>[o(de,{modelValue:e(n).status,"onUpdate:modelValue":a[1]||(a[1]=l=>e(n).status=l),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:t(()=>[o(M,{label:"已启用",value:"1"}),o(M,{label:"已停用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),o(z,null,{default:t(()=>[o(p,{type:"primary",icon:e(d)("ri:search-line"),loading:e(A),onClick:e(E)},{default:t(()=>[m(" 搜索 ")]),_:1},8,["icon","loading","onClick"]),o(p,{icon:e(d)(e(Be)),onClick:a[2]||(a[2]=l=>e(oe)(x.value))},{default:t(()=>[m(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),buttons:t(()=>[f((u(),S(p,{type:"primary",icon:e(d)(e(De)),onClick:a[3]||(a[3]=l=>e(N)())},{default:t(()=>[m(" 新增角色 ")]),_:1},8,["icon"])),[[w,"add"]])]),default:t(({size:l,dynamicColumns:he,height:ge})=>[o(fe,{ref_key:"tableRef",ref:_,"align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(A),size:l,height:ge,adaptive:"","row-style":e(K),adaptiveConfig:h,data:e(Z).slice((e(g).currentPage-1)*e(g).pageSize,e(g).currentPage*e(g).pageSize),columns:he,pagination:e(g),paginationSmall:l==="small","header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(pe),onPageSizeChange:e(ie),onPageCurrentChange:e(ce)},{operation:t(({row:V})=>[f((u(),S(p,{class:"reset-margin",link:"",type:"primary",size:l,icon:e(d)(e(Ie)),onClick:Q=>e(N)("修改",V)},{default:t(()=>[m(" 修改 ")]),_:2},1032,["size","icon","onClick"])),[[w,"edit"]]),o(me,{title:`是否确认删除角色名称为${V.name}的这条数据`,onConfirm:Q=>e(ae)(V)},{reference:t(()=>[f((u(),S(p,{class:"reset-margin",link:"",type:"primary",size:l,icon:e(d)(e(ze))},{default:t(()=>[m(" 删除 ")]),_:2},1032,["size","icon"])),[[w,"delete"]])]),_:2},1032,["title","onConfirm"]),f((u(),S(p,{class:"reset-margin",link:"",type:"primary",size:l,icon:e(d)(e(Te)),onClick:Q=>e(j)(V)},{default:t(()=>[m(" 权限 ")]),_:2},1032,["size","icon","onClick"])),[[w,"auth"]])]),_:2},1032,["loading","size","height","row-style","adaptiveConfig","data","columns","pagination","paginationSmall","header-cell-style","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["class","columns","onRefresh"]),e(c)?(u(),q("div",Ne,[r("div",je,[r("div",Fe,[r("span",{class:R(b.value)},[f(o(O,{class:"dark:text-white",width:"18px",height:"18px",icon:e(Ue),onClick:e(j)},null,8,["icon","onClick"]),[[H,{content:"关闭"}]])],2),r("span",{class:R([b.value,"ml-2"])},[f(o(O,{class:"dark:text-white",width:"18px",height:"18px",icon:e(Ae),onClick:e(te)},null,8,["icon","onClick"]),[[H,{content:"保存菜单权限"}]])],2)]),r("p",Me," 菜单权限 "+G(`${(L=e(U))!=null&&L.name?`（${e(U).name}）`:""}`),1)]),o(F,{modelValue:e(I),"onUpdate:modelValue":a[4]||(a[4]=l=>P(I)?I.value=l:null),placeholder:"请输入菜单进行搜索",class:"mb-1",clearable:"",onInput:e(re)},null,8,["modelValue","onInput"]),r("div",Oe,[o(B,{modelValue:e($),"onUpdate:modelValue":a[5]||(a[5]=l=>P($)?$.value=l:null),label:"展开/折叠"},null,8,["modelValue"]),o(B,{modelValue:e(D),"onUpdate:modelValue":a[6]||(a[6]=l=>P(D)?D.value=l:null),label:"全选/全不选"},null,8,["modelValue"]),o(B,{modelValue:e(k),"onUpdate:modelValue":a[7]||(a[7]=l=>P(k)?k.value=l:null),label:"父子联动"},null,8,["modelValue"])]),o(_e,{ref_key:"treeRef",ref:i,"show-checkbox":"",data:e(ee),props:e(le),height:C.value,"filter-method":e(ne),"check-strictly":!e(k)},{default:t(({node:l})=>[r("span",null,G(e(se)(l.label)),1)]),_:1},8,["data","props","height","filter-method","check-strictly"])])):Pe("",!0)],2)])}}}),sl=$e(He,[["__scopeId","data-v-6f9cd899"]]);export{sl as default};
