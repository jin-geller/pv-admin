import ie from"./tree-X0OoDCVh.js";import{useUser as se}from"./hook-BBN8o3uq.js";import{P as de}from"./index-DaM9kZQk.js";import{u as d}from"./hooks-Wm5s6Ksc.js";import{d as ce}from"./admin-line-CpqWPwjZ.js";import{A as pe,E as me,D as ue}from"./add-circle-line-CoQjCwv9.js";import{R as fe}from"./refresh-zmagq4lj.js";import{d as _e,n as S,a2 as he,r as i,j as M,o as c,c as T,b as l,T as _,u as e,e as R,h as o,f as s,w as u,g as h,y as ge,C as ve,_ as Ce}from"./index-BA19eJmX.js";import"./git-branch-line-BhusJOme.js";import"./role.vue_vue_type_script_setup_true_lang-BidJNT-e.js";import"./index-_Lri3Guu.js";import"./index.vue_vue_type_script_setup_true_lang-Mr453eKl.js";import"./publicStyle-21uR1UcM.js";import"./user-DNtD0Fqa.js";import"./staff-CNd9j2Aq.js";import"./department-0itGloVX.js";import"./role-CicKRrAx.js";import"./sortable.esm-DUfXNDJ2.js";import"./epTheme-DMNTQLh-.js";const be={width:24,height:24,body:'<path fill="currentColor" d="M3 19h18v2H3v-2ZM13 5.828V17h-2V5.828L4.929 11.9l-1.414-1.414L12 2l8.485 8.485l-1.414 1.415L13 5.827Z"/>'},ke=be,ye={width:24,height:24,body:'<path fill="currentColor" d="M18 8h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h2V7a6 6 0 1 1 12 0v1ZM5 10v10h14V10H5Zm6 4h2v2h-2v-2Zm-4 0h2v2H7v-2Zm8 0h2v2h-2v-2Zm1-6V7a4 4 0 0 0-8 0v1h8Z"/>'},xe=ye,Ve={width:1024,height:1024,body:'<path fill="currentColor" d="M176 416a112 112 0 1 1 0 224a112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224a112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224a112 112 0 0 1 0-224z"/>'},we=Ve,Se={key:0,class:"bg-[var(--el-fill-color-light)] w-full h-[46px] mb-2 pl-4 flex items-center"},Re={class:"flex-auto"},$e={style:{"font-size":"var(--el-font-size-base)"},class:"text-[rgba(42,46,54,0.5)] dark:text-[rgba(220,220,242,0.5)]"},De=_e({name:"Staff",__name:"index",setup(ze){const $=S(),k=S(),D=S(),N=he({offsetBottom:108}),{form:n,loading:z,columns:H,dataList:E,treeData:F,treeLoading:j,selectedNum:P,pagination:g,buttonClass:y,deviceDetection:x,onSearch:V,resetForm:U,onbatchDel:A,openDialog:Z,onTreeSelect:I,handleUpdate:q,handleDelete:G,handleUpload:J,handleReset:K,handleRole:O,handleSizeChange:Q,onSelectionCancel:W,handleCurrentChange:X,handleSelectionChange:Y}=se(D,$);return(Pe,t)=>{const C=i("el-input"),p=i("el-form-item"),b=i("el-option"),L=i("el-select"),r=i("el-button"),ee=i("el-form"),B=i("el-popconfirm"),w=i("el-dropdown-item"),le=i("el-dropdown-menu"),oe=i("el-dropdown"),ae=i("pure-table"),f=M("auth"),te=M("motion-fade");return c(),T("div",{class:_(["flex","justify-between",e(x)()&&"flex-wrap"])},[l(ie,{ref_key:"treeRef",ref:$,class:_(["mr-2",e(x)()?"w-full":"min-w-[200px]"]),treeData:e(F),treeLoading:e(j),onTreeSelect:e(I),onResetForm:t[0]||(t[0]=a=>e(U)(k.value))},null,8,["class","treeData","treeLoading","onTreeSelect"]),R("div",{class:_([e(x)()?["w-full","mt-2"]:"w-[calc(100%-200px)]"])},[l(e(de),{title:"员工管理",columns:e(H),isCollapseSearch:!0,onRefresh:e(V)},{collapseSearch:o(()=>[l(ee,{ref_key:"formRef",ref:k,inline:!0,model:e(n),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:o(()=>[l(p,{label:"姓名：",prop:"username"},{default:o(()=>[l(C,{modelValue:e(n).username,"onUpdate:modelValue":t[1]||(t[1]=a=>e(n).username=a),placeholder:"请输入姓名",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),l(p,{label:"昵称：",prop:"nickname"},{default:o(()=>[l(C,{modelValue:e(n).nickname,"onUpdate:modelValue":t[2]||(t[2]=a=>e(n).nickname=a),placeholder:"请输入昵称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),l(p,{label:"手机号码：",prop:"phone"},{default:o(()=>[l(C,{modelValue:e(n).phone,"onUpdate:modelValue":t[3]||(t[3]=a=>e(n).phone=a),placeholder:"请输入手机号码",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),l(p,{label:"邮箱：",prop:"email"},{default:o(()=>[l(C,{modelValue:e(n).email,"onUpdate:modelValue":t[4]||(t[4]=a=>e(n).email=a),placeholder:"请输入邮箱",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),l(p,{label:"性别：",prop:"sex"},{default:o(()=>[l(L,{modelValue:e(n).sex,"onUpdate:modelValue":t[5]||(t[5]=a=>e(n).sex=a),placeholder:"请选择",clearable:"",class:"!w-[180px]",onChange:e(V)},{default:o(()=>[l(b,{label:"男",value:"0"}),l(b,{label:"女",value:"1"})]),_:1},8,["modelValue","onChange"])]),_:1}),l(p,{label:"状态：",prop:"status"},{default:o(()=>[l(L,{modelValue:e(n).status,"onUpdate:modelValue":t[6]||(t[6]=a=>e(n).status=a),placeholder:"请选择",clearable:"",class:"!w-[180px]"},{default:o(()=>[l(b,{label:"已启用",value:"1"}),l(b,{label:"已停用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:o(()=>[l(r,{type:"primary",icon:e(d)("ri:search-line"),loading:e(z),onClick:e(V)},{default:o(()=>[s(" 搜索 ")]),_:1},8,["icon","loading","onClick"]),l(r,{icon:e(d)(e(fe)),onClick:t[7]||(t[7]=a=>e(U)(k.value))},{default:o(()=>[s(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),buttons:o(()=>[u((c(),h(r,{type:"primary",icon:e(d)(e(pe)),onClick:t[8]||(t[8]=a=>e(Z)())},{default:o(()=>[s(" 新增用户 ")]),_:1},8,["icon"])),[[f,"add"]])]),default:o(({size:a,dynamicColumns:ne,height:re})=>[e(P)>0?u((c(),T("div",Se,[R("div",Re,[R("span",$e," 已选 "+ge(e(P))+" 项 ",1),l(r,{type:"primary",text:"",onClick:e(W)},{default:o(()=>[s(" 取消选择 ")]),_:1},8,["onClick"])]),l(B,{title:"是否确认删除?",onConfirm:e(A)},{reference:o(()=>[l(r,{type:"danger",text:"",class:"mr-1"},{default:o(()=>[s(" 批量删除 ")]),_:1})]),_:1},8,["onConfirm"])])),[[te]]):ve("",!0),l(ae,{ref_key:"tableRef",ref:D,"row-key":"id","align-whole":"center",adaptive:"",adaptiveConfig:N,"table-layout":"auto",loading:e(z),size:a,height:re,data:e(E).slice((e(g).currentPage-1)*e(g).pageSize,e(g).currentPage*e(g).pageSize),columns:ne,pagination:e(g),paginationSmall:a==="small","header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(Y),onPageSizeChange:e(Q),onPageCurrentChange:e(X)},{operation:o(({row:m})=>[u((c(),h(r,{class:"reset-margin",link:"",type:"primary",size:a,icon:e(d)(e(me)),onClick:v=>e(Z)("修改",m)},{default:o(()=>[s(" 修改 ")]),_:2},1032,["size","icon","onClick"])),[[f,"edit"]]),l(B,{title:`是否确认删除用户编号为${m.id}的这条数据`,onConfirm:v=>e(G)(m)},{reference:o(()=>[u((c(),h(r,{class:"reset-margin",link:"",type:"primary",size:a,icon:e(d)(e(ue))},{default:o(()=>[s(" 删除 ")]),_:2},1032,["size","icon"])),[[f,"delete"]])]),_:2},1032,["title","onConfirm"]),l(oe,null,{dropdown:o(()=>[l(le,null,{default:o(()=>[l(w,null,{default:o(()=>[u((c(),h(r,{class:_(e(y)),link:"",type:"primary",size:a,icon:e(d)(e(ke)),onClick:v=>e(J)(m)},{default:o(()=>[s(" 上传头像 ")]),_:2},1032,["class","size","icon","onClick"])),[[f,"upload_icon"]])]),_:2},1024),l(w,null,{default:o(()=>[u((c(),h(r,{class:_(e(y)),link:"",type:"primary",size:a,icon:e(d)(e(xe)),onClick:v=>e(K)(m)},{default:o(()=>[s(" 重置密码 ")]),_:2},1032,["class","size","icon","onClick"])),[[f,"reset_pass"]])]),_:2},1024),l(w,null,{default:o(()=>[u((c(),h(r,{class:_(e(y)),link:"",type:"primary",size:a,icon:e(d)(e(ce)),onClick:v=>e(O)(m)},{default:o(()=>[s(" 分配角色 ")]),_:2},1032,["class","size","icon","onClick"])),[[f,"assign_role"]])]),_:2},1024)]),_:2},1024)]),default:o(()=>[l(r,{class:"ml-3 mt-[2px]",link:"",type:"primary",size:a,icon:e(d)(e(we)),onClick:v=>e(q)(m)},null,8,["size","icon","onClick"])]),_:2},1024)]),_:2},1032,["adaptiveConfig","loading","size","height","data","columns","pagination","paginationSmall","header-cell-style","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["columns","onRefresh"])],2)],2)}}}),We=Ce(De,[["__scopeId","data-v-29233570"]]);export{We as default};
